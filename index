<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®¶è£æœ‰å¿ </title>
    <style>
        :root {
            --primary-color: #58cc02; /* Duolingo Green */
            --primary-shadow: #58a700;
            --wrong-color: #ff4b4b;   /* Duolingo Red */
            --wrong-shadow: #ea2b2b;
            --bg-color: #fff9e6;      /* Chiikawa Cream */
            --text-color: #4b4b4b;
            --card-bg: #ffffff;
            --chiikawa-pink: #ffdae0;
            --hachiware-blue: #dceeff;
        }

        body {
            font-family: "Varela Round", "M Plus Rounded 1c", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            height: 100vh;
            color: var(--text-color);
            overflow: hidden;
        }

        #app {
            width: 100%;
            max-width: 600px;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: white;
            position: relative;
        }

        /* Header: Progress & Hearts */
        header {
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .close-btn {
            font-size: 24px;
            color: #e5e5e5;
            cursor: pointer;
        }

        .progress-container {
            flex-grow: 1;
            background-color: #e5e5e5;
            height: 16px;
            border-radius: 8px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 8px;
        }

        .hearts {
            display: flex;
            align-items: center;
            font-size: 20px;
            color: #ff4b4b;
            font-weight: bold;
        }

        .hearts span { margin-left: 5px; }

        /* Main Content */
        .game-area {
            flex-grow: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-y: auto;
        }

        /* Character Area */
        .character-box {
            margin-bottom: 20px;
            display: flex;
            align-items: flex-end;
            gap: 15px;
            width: 100%;
        }

        .character-img {
            width: 100px;
            height: 100px;
            background-color: var(--hachiware-blue); /* Placeholder color */
            border-radius: 50%;
            border: 3px solid #333;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            position: relative;
        }

        /* Speech Bubble */
        .speech-bubble {
            border: 2px solid #e5e5e5;
            border-radius: 15px;
            padding: 15px;
            position: relative;
            background: white;
            font-size: 18px;
            font-weight: bold;
            flex-grow: 1;
        }

        .speech-bubble::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            border-width: 10px 10px 10px 0;
            border-style: solid;
            border-color: transparent #e5e5e5 transparent transparent;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            width: 100%;
            margin-bottom: 100px; /* Space for footer */
        }

        .option-btn {
            background: white;
            border: 2px solid #e5e5e5;
            border-radius: 15px;
            padding: 15px 20px;
            font-size: 16px;
            text-align: left;
            cursor: pointer;
            box-shadow: 0 2px 0 #e5e5e5;
            transition: all 0.1s;
            position: relative;
            display: flex;
            align-items: center;
        }

        .option-btn:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        .option-btn.selected {
            border-color: #84d8ff;
            background-color: #ddf4ff;
            color: #1cb0f6;
            box-shadow: 0 2px 0 #1899d6;
        }

        .option-btn.correct {
            border-color: var(--primary-color);
            background-color: #d7ffb8;
            color: #58a700;
            box-shadow: 0 2px 0 var(--primary-shadow);
        }

        .option-btn.wrong {
            border-color: var(--wrong-color);
            background-color: #ffdfe0;
            color: #ea2b2b;
            box-shadow: 0 2px 0 var(--wrong-shadow);
        }

        .key-circle {
            border: 2px solid #e5e5e5;
            border-radius: 8px;
            width: 25px;
            height: 25px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            font-size: 12px;
            font-weight: bold;
            color: #afafaf;
        }

        .option-btn.selected .key-circle { border-color: #1cb0f6; color: #1cb0f6; }
        .option-btn.correct .key-circle { border-color: var(--primary-shadow); color: var(--primary-shadow); }
        .option-btn.wrong .key-circle { border-color: var(--wrong-shadow); color: var(--wrong-shadow); }

        /* Footer Action Area */
        .footer {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 600px;
            padding: 20px; /* Default padding */
            border-top: 2px solid #e5e5e5;
            background: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
            transition: background-color 0.3s;
            z-index: 100;
        }

        .footer.correct {
            background-color: #d7ffb8;
            border-color: #b8f28b;
            color: #58a700;
        }
        
        .footer.wrong {
            background-color: #ffdfe0;
            border-color: #ffc1c1;
            color: #ea2b2b;
        }

        .feedback-text {
            display: none;
            flex-direction: column;
        }
        
        .feedback-title { font-weight: bold; font-size: 20px; margin-bottom: 5px; }
        .feedback-detail { font-size: 14px; }

        .check-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            width: 100%;
            cursor: pointer;
            box-shadow: 0 4px 0 var(--primary-shadow);
            text-transform: uppercase;
        }

        .check-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        .check-btn.disabled {
            background-color: #e5e5e5;
            color: #afafaf;
            box-shadow: none;
            pointer-events: none;
        }

        .check-btn.continue-correct {
            background-color: #58cc02;
            box-shadow: 0 4px 0 #46a302;
            width: auto;
            min-width: 150px;
        }
        
        .check-btn.continue-wrong {
            background-color: #ff4b4b;
            box-shadow: 0 4px 0 #ea2b2b;
            width: auto;
            min-width: 150px;
        }

        /* Result Screen */
        #result-screen {
            display: none;
            text-align: center;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
        }
        
        .result-img { font-size: 80px; margin-bottom: 20px; animation: bounce 1s infinite; }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

    </style>
</head>
<body>

<div id="app">
    <header id="game-header">
        <div class="close-btn">âœ•</div>
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        <div class="hearts">
            â¤ï¸ <span id="lives-count">5</span>
        </div>
    </header>

    <div class="game-area" id="quiz-area">
        <div class="character-box">
            <div class="character-img" id="mascot">ğŸ±</div> <div class="speech-bubble" id="question-text">
                é¡Œç›®è¼‰å…¥ä¸­...
            </div>
        </div>

        <div class="options-grid" id="options-container">
            </div>
    </div>

    <div id="result-screen">
        <div class="result-img">ğŸ°</div>
        <h1>è¨ä¼å®Œæˆï¼</h1>
        <p>ä½ å®Œæˆå’— COMP1101 çš„ç‰¹è¨“å•¦ï¼</p>
        <p>å¾—åˆ†ï¼š<span id="final-score">0</span> / <span id="total-q">0</span></p>
        <button class="check-btn" onclick="location.reload()">å†ç©ä¸€æ¬¡</button>
    </div>

    <div class="footer" id="footer">
        <div class="feedback-text" id="feedback-area">
            <div class="feedback-title" id="feedback-title"></div>
            <div class="feedback-detail" id="feedback-detail"></div>
        </div>
        <button class="check-btn disabled" id="action-btn">æª¢æŸ¥</button>
    </div>
</div>

<script>
    // --- Data: The Questions (Subset for Demo, formatted from user input) ---
    // æˆ‘æ”¾å…¥äº†å‰15é¡Œä½œç‚ºç¯„ä¾‹ï¼Œä½ å¯ä»¥æŒ‰ç…§é€™å€‹æ ¼å¼ç¹¼çºŒæ·»åŠ å‰©ä¸‹çš„é¡Œç›®ã€‚
    const questions = [
        { q: "____ æ˜¯ä¸€å€‹å…¨çƒå„åœ°ç¶²è·¯çš„é›†åˆé«”ï¼Œå®ƒé€£çµæ•¸ä»¥ç™¾è¬è¨ˆçš„ä¼æ¥­ã€æ”¿åºœæ©Ÿé—œã€æ•™è‚²æ©Ÿæ§‹èˆ‡å€‹äººã€‚", options: ["Internet", "Telnet", "Web", "NSFNet"], a: 0 },
        { q: "æœ‰äº›å¤–å¯„éƒµä»¶ä¼ºæœå™¨æ¡ç”¨çš„å‚³è¼¸å”å®šæ˜¯ ____ ã€‚", options: ["SMTP", "ARPA", "POP", "HTML"], a: 0 },
        { q: "Linux ä½œæ¥­ç³»çµ±æ˜¯å±¬æ–¼ä¸‹åˆ—å“ªä¸€ç¨®é¡å‹çš„ä½œæ¥­ç³»çµ±ï¼Ÿ", options: ["å–®äººå–®å·¥", "å–®äººå¤šå·¥", "å¤šäººå–®å·¥", "å¤šäººå¤šå·¥"], a: 3 },
        { q: "____ æ˜¯ä¸€ç¨®å”åŠ©äººå€‘èƒ½æ›´æœ‰æ•ˆèƒ½å’Œæ•ˆç‡ä¾†åŸ·è¡Œæ—¥å¸¸å•†æ¥­æ´»å‹•çš„æ‡‰ç”¨è»Ÿé«”ã€‚", options: ["å»£å‘Šè»Ÿé«”", "è¡ŒéŠ·è»Ÿé«”", "å•†æ¥­è»Ÿé«”", "å€¡å°è»Ÿé«”"], a: 2 },
        { q: "ä¸‹åˆ—é‚£ä¸€é …ï¼Œå¯å…ˆè©¦ç”¨ï¼Œè©¦ç”¨æœŸæ»¿å†ç¹³äº¤ç™»éŒ„è²»ï¼Ÿ", options: ["æ‡‰ç”¨è»Ÿé«”", "å…±äº«è»Ÿé«”", "å•†æ¥­è»Ÿé«”", "å…¬ç›Šè»Ÿé«”"], a: 1 },
        { q: "ä¸‹åˆ—é‚£ä¸€å€‹ä¸æ˜¯ä½œæ¥­ç³»çµ±ï¼Ÿ", options: ["Windows 8", "UNIX", "Linux", "JAVA"], a: 3 },
        { q: "____ æ˜¯æŒ‡ç‚ºè¡Œå‹•é›»è…¦å’Œè£ç½®æä¾›ç¶²éš›ç¶²è·¯é€£ç·šçš„ç„¡ç·šç¶²è·¯ã€‚", options: ["ç„¡ç·šé»", "ç†±é€£çµ", "é€£ç·šé»", "ç†±é»"], a: 3 },
        { q: "ä¸‹åˆ—ä½•è€…ç‚ºç„¡ç·šå¼ç¶²è·¯åª’é«”ï¼Ÿ", options: ["å…‰çº–", "åŒè»¸é›»çºœç·š", "ç„¡é®è”½å¼é›™çµç·š", "ç´…å¤–ç·š"], a: 3 },
        { q: "é›»è…¦ç—…æ¯’çš„ä¾µå…¥æ˜¯å±¬æ–¼ï¼Ÿ", options: ["æ©Ÿä»¶æ•…éšœ", "å¤©ç„¶ç½å®³", "æƒ¡æ„ç ´å£", "äººç‚ºéå¤±"], a: 2 },
        { q: "____ æ˜¯ä¸€ç¨®æœƒåœ¨è¨˜æ†¶é«”æˆ–é€éç¶²è·¯é‡è¤‡çš„è‡ªæˆ‘è¤‡è£½ï¼Œè€—ç›¡ç³»çµ±çš„è³‡æºï¼Œä¸¦ä¸”å¯èƒ½çªç„¶é—œé–‰ç³»çµ±çš„æƒ¡æ„è»Ÿé«”ã€‚", options: ["æœ¨é¦¬ç¨‹å¼", "é–“è«œè»Ÿé«”", "æª”æ¡ˆå£“ç¸®å…¬ç”¨ç¨‹å¼", "è •èŸ²"], a: 3 },
        { q: "ä¸‹åˆ—å„ç¨®æ–°èˆˆé«˜å®¹é‡å„²å­˜è¨­å‚™ä¸­ï¼Œä½•è€…éå±¬å…‰ç¢ŸåŸç†ä¹‹å„²å­˜è¨­å‚™ï¼Ÿ", options: ["DVD-ROM", "ZIP", "CD-ROM", "CD-R/W"], a: 1 },
        { q: "ä¸‹åˆ—ä½•è€…ä¸å±¬æ–¼é€±é‚Šè¨­å‚™ï¼Ÿ", options: ["å°è¡¨æ©Ÿ", "CPU", "éµç›¤", "CD-ROM"], a: 1 },
        { q: "UNIVAC æ˜¯ç¬¬ä¸€éƒ¨é‡ç”¢çš„é›»è…¦ï¼Œå±¬æ–¼ã€Œç¬¬ä¸€ä»£ã€ã€‚UNIVAC æ‰€ä½¿ç”¨çš„ä¸»è¦é›»å­å…ƒä»¶æ‡‰è©²æ˜¯ä»€éº¼ï¼Ÿ", options: ["è¶…å¤§å‹ç©é«”é›»è·¯", "é›»æ™¶é«”", "çœŸç©ºç®¡", "ç©é«”é›»è·¯"], a: 2 },
        { q: "è³‡è¨Šçš„å®šç¾©æ˜¯ä»€éº¼ï¼Ÿ", options: ["æ•¸æ“šçš„é›†åˆ", "ç¶“éè™•ç†çš„æ•¸æ“š", "åªå­˜åœ¨æ–¼è¨ˆç®—æ©Ÿä¸­çš„å…§å®¹", "ç„¡æ³•é‡åŒ–çš„å…§å®¹"], a: 1 },
        { q: "å“ªä¸€é …ä¸å±¬æ–¼è¨ˆç®—æ©Ÿç¡¬é«”ï¼Ÿ", options: ["CPU", "RAM", "æ“ä½œç³»çµ±", "ç¡¬ç¢Ÿ"], a: 2 }
    ];

    // --- Game State ---
    let currentQIndex = 0;
    let lives = 5;
    let selectedOptionIndex = null;
    let isChecked = false;
    let score = 0;

    // --- Elements ---
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const progressBar = document.getElementById('progress-bar');
    const livesCount = document.getElementById('lives-count');
    const actionBtn = document.getElementById('action-btn');
    const footer = document.getElementById('footer');
    const feedbackArea = document.getElementById('feedback-area');
    const feedbackTitle = document.getElementById('feedback-title');
    const feedbackDetail = document.getElementById('feedback-detail');
    const mascot = document.getElementById('mascot');
    const resultScreen = document.getElementById('result-screen');
    const quizArea = document.getElementById('quiz-area');
    const header = document.getElementById('game-header');

    // Chiikawa Mascots (Using Emojis for simplicity, replace with <img> if needed)
    const MASCOTS = {
        normal: "ğŸ¹", // Chiikawa
        happy: "ğŸ±",  // Hachiware
        cry: "ğŸ˜­",    // Chiikawa crying
        usagi: "ğŸ°"   // Usagi
    };

    // --- Functions ---

    function initGame() {
        currentQIndex = 0;
        lives = 5;
        score = 0;
        livesCount.textContent = lives;
        updateProgressBar();
        loadQuestion();
    }

    function loadQuestion() {
        const q = questions[currentQIndex];
        questionText.textContent = q.q;
        optionsContainer.innerHTML = '';
        selectedOptionIndex = null;
        isChecked = false;

        // Reset UI
        mascot.textContent = MASCOTS.normal;
        footer.className = 'footer';
        footer.style.backgroundColor = 'white';
        feedbackArea.style.display = 'none';
        actionBtn.textContent = 'æª¢æŸ¥';
        actionBtn.className = 'check-btn disabled';
        actionBtn.onclick = checkAnswer;

        // Create Options
        q.options.forEach((opt, index) => {
            const btn = document.createElement('div');
            btn.className = 'option-btn';
            btn.innerHTML = `<div class="key-circle">${index + 1}</div>${opt}`;
            btn.onclick = () => selectOption(index, btn);
            optionsContainer.appendChild(btn);
        });
    }

    function selectOption(index, btnElement) {
        if (isChecked) return; // Locked after answering

        // Visual selection
        document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
        btnElement.classList.add('selected');
        
        selectedOptionIndex = index;
        
        // Enable Check Button
        actionBtn.classList.remove('disabled');
        // Chiikawa gets excited
        mascot.textContent = MASCOTS.usagi; 
    }

    function checkAnswer() {
        if (isChecked) return;
        isChecked = true;

        const currentQ = questions[currentQIndex];
        const isCorrect = selectedOptionIndex === currentQ.a;
        const buttons = document.querySelectorAll('.option-btn');

        // Lock all buttons
        buttons.forEach(b => b.style.pointerEvents = 'none');

        if (isCorrect) {
            // Correct State
            buttons[selectedOptionIndex].classList.add('correct');
            buttons[selectedOptionIndex].classList.remove('selected');
            
            mascot.textContent = MASCOTS.happy; // Hachiware happy
            footer.classList.add('correct');
            feedbackTitle.textContent = "å¥½é‡ï¼ç­”å•±å’—å•¦ï¼";
            feedbackDetail.textContent = "";
            actionBtn.className = "check-btn continue-correct";
            score++;
        } else {
            // Wrong State
            buttons[selectedOptionIndex].classList.add('wrong');
            buttons[selectedOptionIndex].classList.remove('selected');
            // Show correct answer
            buttons[currentQ.a].classList.add('correct');

            mascot.textContent = MASCOTS.cry; // Chiikawa crying
            footer.classList.add('wrong');
            feedbackTitle.textContent = "æ­£ç¢ºç­”æ¡ˆä¿‚ï¼š";
            feedbackDetail.textContent = currentQ.options[currentQ.a];
            actionBtn.className = "check-btn continue-wrong";
            
            lives--;
            livesCount.textContent = lives;
            livesCount.parentElement.classList.add('shake'); // Add animation class if wanted
        }

        feedbackArea.style.display = 'flex';
        actionBtn.textContent = 'ç¹¼çºŒ';
        actionBtn.onclick = nextQuestion;
        updateProgressBar();
    }

    function nextQuestion() {
        if (lives <= 0) {
            showResult(false);
            return;
        }

        currentQIndex++;
        if (currentQIndex < questions.length) {
            loadQuestion();
        } else {
            showResult(true);
        }
    }

    function updateProgressBar() {
        const percentage = ((currentQIndex) / questions.length) * 100;
        progressBar.style.width = percentage + '%';
    }

    function showResult(completed) {
        quizArea.style.display = 'none';
        header.style.display = 'none';
        footer.style.display = 'none';
        resultScreen.style.display = 'flex';

        document.getElementById('total-q').textContent = questions.length;
        document.getElementById('final-score').textContent = score;
        
        const title = resultScreen.querySelector('h1');
        const img = resultScreen.querySelector('.result-img');
        
        if (completed) {
            title.textContent = "è¨ä¼å¤§æˆåŠŸï¼";
            img.textContent = "ğŸŠ";
        } else {
            title.textContent = "æ„›å¿ƒç”¨æ™’å•¦...";
            img.textContent = "ğŸ˜­";
        }
    }

    // Start
    initGame();

</script>

</body>
</html>
